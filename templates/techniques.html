{% extends 'base.html' %}
{% block content %}
<section class="card">
  <h2>Karate Techniques</h2>
  <p>Employees and managers can add, edit, comment on, and delete techniques.</p>
  <form method="post">
    <label>Technique Name
      <input type="text" name="technique_name" required />
    </label>
    <label>Description
      <textarea name="description" rows="3" placeholder="Optional"></textarea>
    </label>
    <button type="submit">Add Technique</button>
  </form>
</section>

<section class="card">
  <h3>Technique List</h3>
  <table>
    <tr><th>Name</th><th>Description</th><th>Active</th><th>Created By</th><th>Created At</th><th>Edit</th><th>Delete</th></tr>
    {% for t in technique_list %}
      <tr>
        <td>{{ t.technique_name }}</td>
        <td>{{ t.description or '-' }}</td>
        <td>{{ 'Yes' if t.is_active else 'No' }}</td>
        <td>{{ t.created_by or '-' }}</td>
        <td>{{ t.created_at }}</td>
        <td>
          <form method="post" action="{{ url_for('edit_technique', technique_id=t.id) }}">
            <input type="text" name="technique_name" value="{{ t.technique_name }}" required />
            <input type="text" name="description" value="{{ t.description or '' }}" />
            <input type="text" name="extra_comment" placeholder="Add comment (optional)" />
            <label class="checkbox">
              <input type="checkbox" name="is_active" {% if t.is_active %}checked{% endif %} />
              Active
            </label>
            <button type="submit">Save</button>
          </form>
        </td>
        <td>
          <form method="post" action="{{ url_for('delete_technique', technique_id=t.id) }}">
            <button type="submit" class="danger">Delete</button>
          </form>
        </td>
      </tr>
    {% else %}
      <tr><td colspan="7">No techniques added yet.</td></tr>
    {% endfor %}
  </table>
</section>
{% endblock %}
