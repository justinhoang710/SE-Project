{% extends 'base.html' %}
{% block content %}
<section class="card">
  <h2>Employee Dashboard</h2>
  <div class="actions">
    <a class="button" href="{{ url_for('employee_schedule') }}">Schedule for Staff</a>
    <a class="button" href="{{ url_for('employee_progress') }}">Progress Screen</a>
    <a class="button" href="{{ url_for('techniques') }}">Add Techniques</a>
    <a class="button" href="{{ url_for('request_switch') }}">Request Shift Switch</a>
    <a class="button" href="{{ url_for('request_callout') }}">Submit Call-Out</a>
  </div>
</section>

<section class="card">
  <h3>Next 2 Weeks Calendar</h3>
  <div class="calendar-grid compact-calendar">
    {% for week in calendar_weeks %}
      {% for day in week %}
        <article class="calendar-day">
          <header class="calendar-day-header">
            <h3>{{ day.weekday_short }}</h3>
            <p>{{ day.display_date }}</p>
          </header>
          <div class="calendar-shift-list">
            {% for shift in day.shifts %}
              <p class="calendar-shift-item">{{ shift.start_label }}-{{ shift.end_label }} {{ shift.class_name }}</p>
            {% else %}
              <p class="hint">No shifts</p>
            {% endfor %}
          </div>
        </article>
      {% endfor %}
    {% endfor %}
  </div>
</section>

<section class="card">
  <h3>My Requests</h3>
  <table>
    <tr><th>Type</th><th>Status</th><th>Shift</th><th>Requested Employee</th><th>Reason</th><th>Submitted</th></tr>
    {% for r in my_requests %}
      <tr>
        <td>{{ r.request_type }}</td>
        <td>{{ r.status }}</td>
        <td>
          {% if r.shift_date %}
            {{ r.shift_date }} {{ r.start_time }}-{{ r.end_time }} ({{ r.class_name }})
          {% else %}
            N/A
          {% endif %}
        </td>
        <td>{{ r.requested_employee or '-' }}</td>
        <td>{{ r.reason }}</td>
        <td>{{ r.created_at }}</td>
      </tr>
    {% else %}
      <tr><td colspan="6">No requests yet.</td></tr>
    {% endfor %}
  </table>
</section>
{% endblock %}
